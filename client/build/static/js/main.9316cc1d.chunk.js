(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,a){},39:function(e,t,a){e.exports=a(66)},66:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),o=a.n(r),c=a(8),m=a(1),s=a(22),i=a.n(s),u=function(e,t){var a,n;console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),a="token",n=e.data.token,"undefined"!==window&&i.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()},b=function(){if("undefined"!==window&&function(e){if("undefined"!==window)return i.a.get(e)}("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},d=function(e){var t;t="token","undefined"!==window&&i.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()},f=Object(m.g)((function(e){var t=e.children,a=e.match,r=e.history,o=function(e){return a.path===e?{color:"#000"}:{color:"#fff"}};return l.a.createElement(n.Fragment,null,l.a.createElement("ul",{className:"nav nav-tabs bg-primary"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{to:"/home",className:"nav-link ",style:o("/home")},"Home")),!b()&&l.a.createElement(n.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{to:"/",className:"nav-link",style:o("/")},"Signin"))),b()&&"admin"===b().role&&l.a.createElement(n.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{className:"nav-link",style:o("/admin"),to:"/admin"},b().name)),l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{to:"/signup",className:"nav-link",style:o("/signup")},"Add Student"))),b()&&"student"===b().role&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(c.b,{className:"nav-link",style:o("/private"),to:"/private"},b().name)),b()&&l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#fff"},onClick:function(){d((function(){r.push("/")}))}},"Signout"))),l.a.createElement("div",{className:"container"},t))})),E=a(15),p=a(16),g=a(21),N=a(19),v=function(e){Object(g.a)(a,e);var t=Object(N.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:"images/Collegelogo.png",alt:"KPR Logo",class:"img-thumbnail"}))}}]),a}(n.Component),h=(a(28),function(e){return l.a.createElement("div",{className:"text-center"},l.a.createElement(f,null,l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("h1",{className:"font-weight-bolder text-center p-5"},"Welcome ",l.a.createElement("br",null)," To ",l.a.createElement("br",null)," KPR Institute Of Engineering And Technology")),l.a.createElement("div",{className:"col-md-2 rounded mx-auto d-block"},l.a.createElement(v,null)),l.a.createElement("div",{className:" text-center col-auto p-2"},l.a.createElement("button",{onClick:function(){localStorage.clear(),e.history.push("/")},className:" btn btn-outline-primary form-group"}," Logout")))))}),O=a(10),w=a(3),j=a(18),S=a(17),x=a.n(S),y=a(13),k=(a(37),function(){var e=Object(n.useState)({roll_number:"",register_number:"",name:"",email:"",password:"",buttonText:"Submit"}),t=Object(j.a)(e,2),a=t[0],r=t[1],o=a.roll_number,c=a.register_number,m=a.name,s=a.email,i=a.password,u=a.buttonText,b=function(e){return function(t){r(Object(w.a)(Object(w.a)({},a),{},Object(O.a)({},e,t.target.value)))}},d=function(e){e.preventDefault(),r(Object(w.a)(Object(w.a)({},a),{},{buttonText:"Submitting"})),x()({method:"POST",url:"/api/signup",data:{roll_number:o,register_number:c,name:m,email:s,password:i}}).then((function(e){console.log("SIGNUP SUCCESS",e),r(Object(w.a)(Object(w.a)({},a),{},{roll_number:"",register_number:"",name:"",email:"",password:"",buttonText:"Submitted"})),y.b.success(e.data.message)})).catch((function(e){console.log("SIGNUP ERROR",e.response.data),r(Object(w.a)(Object(w.a)({},a),{},{buttonText:"Submit"})),y.b.error(e.response.data.error)}))};return l.a.createElement(f,null,l.a.createElement("div",{className:"col-md-8 offset-md-2 container"},l.a.createElement(y.a,null),l.a.createElement("form",{className:"container col-md-10 border border-dark sticky-top rounded"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Roll Number"),l.a.createElement("input",{onChange:b("roll_number"),value:o,type:"text",className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Register Number"),l.a.createElement("input",{onChange:b("register_number"),value:c,type:"text",className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Name"),l.a.createElement("input",{onChange:b("name"),type:"text",value:m,className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Email"),l.a.createElement("input",{onChange:b("email"),value:s,type:"text",className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Password"),l.a.createElement("input",{onChange:b("password"),value:i,type:"text",className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{className:"btn btn-primary",onClick:d},u)))))}),C=function(e){Object(g.a)(a,e);var t=Object(N.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"col-5 "},l.a.createElement("img",Object(O.a)({class:"rounded float-left",src:"images/Kprlogo.jpg",alt:"KPR Logo"},"class","img-thumbnail")))}}]),a}(n.Component),T=function(e){var t=e.history,a=Object(n.useState)({email:"",password:"",buttonText:"Submit"}),r=Object(j.a)(a,2),o=r[0],c=r[1],s=o.email,i=o.password,d=o.buttonText,f=function(e){return function(t){c(Object(w.a)(Object(w.a)({},o),{},Object(O.a)({},e,t.target.value)))}},E=function(e){e.preventDefault(),c(Object(w.a)(Object(w.a)({},o),{},{buttonText:"Submitting"})),x()({method:"POST",url:"/api/signin",data:{email:s,password:i}}).then((function(e){console.log("SIGNIN SUCCESS",e),u(e,(function(){c(Object(w.a)(Object(w.a)({},o),{},{roll_number:"",register_number:"",name:"",email:"",password:"",buttonText:"Submitted"})),b()&&"admin"===b().role?t.push("/admin"):t.push("/home")}))})).catch((function(e){console.log("SIGNIN ERROR",e.response.data),c(Object(w.a)(Object(w.a)({},o),{},{buttonText:"Submit"})),y.b.error(e.response.data.error)}))};return l.a.createElement("div",{className:"bg"},l.a.createElement(C,null),l.a.createElement("div",{className:"col-md-5 offset-md-2 container"},l.a.createElement(y.a,null),b()?l.a.createElement(m.a,{to:"/"}):null,l.a.createElement("div",{className:"container border border-dark rounded bg-light p-4 signinbox"},l.a.createElement("form",{className:"col-form-label"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-7 col-form-label font-weight-bold "},"Email"),l.a.createElement("input",{onChange:f("email"),value:s,type:"text",className:"form-control"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{className:"col-sm-5 col-form-label font-weight-bold"},"Password"),l.a.createElement("input",{onChange:f("password"),value:i,type:"password",className:"form-control"})),l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("button",{className:"btn btn-primary",onClick:E},d))))))},I=function(){return l.a.createElement(f,null,l.a.createElement("h1",{className:"text-center"},"Student Private Page"))},P=a(20),R=function(e){var t=e.component,a=Object(P.a)(e,["component"]);return l.a.createElement(m.b,Object.assign({},a,{render:function(e){return b()?l.a.createElement(t,e):l.a.createElement(m.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},_=function(){return l.a.createElement(f,null,l.a.createElement("h1",{className:"text-center"},"Admin Page"))},A=function(e){var t=e.component,a=Object(P.a)(e,["component"]);return l.a.createElement(m.b,Object.assign({},a,{render:function(e){return b()&&"admin"===b().role?l.a.createElement(t,e):l.a.createElement(m.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},G=function(){return l.a.createElement(c.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/home",exact:!0,component:h}),l.a.createElement(m.b,{path:"/signup",exact:!0,component:k}),l.a.createElement(m.b,{path:"/",exact:!0,component:T}),l.a.createElement(R,{path:"/private",exact:!0,component:I}),l.a.createElement(A,{path:"/admin",exact:!0,component:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.9316cc1d.chunk.js.map